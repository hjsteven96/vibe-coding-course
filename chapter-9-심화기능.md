# 🚀 Chapter 9: "심화 기능" (Advanced Features) - 진짜 앱처럼 만들기

> **목표:** 이미지 업로드, 자동 저장, AI 메모 정리 기능을 추가해서 실제 서비스 수준으로 업그레이드합니다.

## Step 9.1: 이미지 업로드 기능 추가하기

메모에 이미지를 첨부할 수 있게 만들어봅시다. Supabase Storage를 사용하면 쉽게 구현할 수 있습니다.

### 1) Supabase Storage 설정하기

1. [Supabase 대시보드](https://supabase.com/dashboard)에서 내 프로젝트로 이동합니다.

2. 왼쪽 메뉴에서 `Storage`를 클릭합니다.

3. `Create a new bucket` 버튼을 클릭하고:
   - **Name**: `vibe-images`
   - **Public bucket** 체크박스 활성화 (이미지를 누구나 볼 수 있게)
   - `Create bucket` 버튼 클릭

### 2) AI에게 이미지 업로드 기능 구현 요청하기

1. 우측 **채팅창**에 `@app/page.tsx`를 입력하고:

   > "@app/page.tsx 메모에 이미지를 업로드할 수 있는 기능을 추가해 줘. 
   > 
   > - 제목과 본문 입력 영역 아래에 이미지 파일 선택 버튼 추가
   > - 선택한 이미지는 Supabase Storage의 'vibe-images' 버킷에 업로드
   > - 업로드된 이미지 URL을 메모 데이터에 함께 저장
   > - 메모 상세 화면에서 이미지가 있으면 본문 아래에 이미지 표시
   > - 이미지는 여러 개 업로드 가능하게
   > 
   > Supabase Storage를 사용해서 구현해 줘."

2. AI가 이미지 업로드 기능을 구현해 줄 겁니다.

3. 브라우저에서 테스트해보세요:
   - 새 메모를 작성하고 이미지를 첨부합니다.
   - 저장 후 메모를 클릭하면 이미지가 보이나요?
   - Supabase 대시보드의 `Storage`에서 업로드된 이미지를 확인해보세요!

## Step 9.2: 자동 저장 기능 추가하기

맥북 노트 앱처럼 저장 버튼 없이 자동으로 저장되게 만들어봅시다.

1. 우측 **채팅창**에 `@app/page.tsx`를 입력하고:

   > "@app/page.tsx 메모를 맥북 노트 앱처럼 자동 저장되게 바꿔줘.
   > 
  
   > - 제목이나 본문을 수정하면 2초 후에 자동으로 Supabase에 저장되게 (debounce 적용)
   > - 저장 중일 때는 '저장 중...' 표시, 저장 완료되면 '저장됨' 표시
   > - 왼쪽 사이드바에서 메모를 클릭하면 오른쪽에서 바로 수정 가능하게
   > 
   > 사용자 경험을 매끄럽게 만들어 줘."

2. AI가 자동 저장 로직을 구현해 줄 겁니다.

3. 브라우저에서 테스트해보세요:
   - 제목을 입력하면 자동으로 메모가 생성되나요?
   - 본문을 수정하면 자동으로 저장되나요?
   - '저장 중...', '저장됨' 표시가 나타나나요?
   - 다른 브라우저에서 확인하면 실시간으로 반영되나요?

## Step 9.3: AI 메모 정리 기능 추가하기

Google Gemini API를 사용해서 긴 메모를 요약하거나 정리해주는 기능을 추가해봅시다!

### 1) Gemini API 키 받기 (무료!)

1. [Google AI Studio](https://aistudio.google.com/)에 접속해서 Google 계정으로 로그인합니다.

2. 왼쪽 메뉴에서 `Get API key`를 클릭합니다.

3. `Create API key` 버튼을 클릭하고:
   - 기존 Google Cloud 프로젝트를 선택하거나
   - `Create API key in new project` 선택

4. 생성된 API 키를 복사해 둡니다.

   > ✨ **좋은 소식**: Gemini API는 무료로 사용 가능합니다! (일일 한도 있음)

### 2) AI 메모 정리 기능 구현하기

1. 우측 **채팅창**에:

   > "Google Gemini API를 사용해서 메모를 정리하는 기능을 추가하려고 해.
   > 
   > Gemini API Key: (여기에 복사한 API 키 붙여넣기)
   > 
   > 이걸 .env.local에 저장하고, @google/generative-ai SDK를 설치해 줘."

2. AI가 설치와 설정을 완료하면, 다시 `@app/page.tsx`를 입력하고:

   > "@app/page.tsx 메모 상세 화면에 'AI로 정리하기' 버튼을 추가해 줘.
   > 
   > 버튼을 누르면:
   > 1. Google Gemini API(gemini-2.5 flash 모델 사용)로 현재 메모 내용을 요약 요청
   > 2. '핵심 내용 3줄 요약', '주요 키워드 추출', '다음 액션 아이템' 형태로 정리
   > 3. 정리된 내용을 메모 본문 아래에 '📝 AI 정리' 섹션으로 표시
   > 4. 로딩 중에는 스피너 표시
   > 
   > API 라우트를 만들어서 서버 사이드에서 처리하게 해줘."

3. AI가 API 라우트와 UI를 만들어 줄 겁니다.

4. 브라우저에서 테스트해보세요:
   - 긴 메모를 작성하고 'AI로 정리하기' 버튼을 클릭합니다.
   - AI가 메모를 요약해주나요?
   - 키워드와 액션 아이템이 잘 추출되나요?

## Step 9.4: 검색 기능 추가하기 (보너스)

메모가 많아지면 검색 기능이 필요합니다!

1. 우측 **채팅창**에 `@app/page.tsx`를 입력하고:

   > "@app/page.tsx 사이드바 상단에 검색 기능을 추가해 줘.
   > 
   > - 검색창에 키워드를 입력하면 제목과 본문에서 실시간 검색
   > - 검색 결과에 일치하는 부분을 하이라이트 표시
   > - 검색 결과가 없으면 '검색 결과 없음' 메시지 표시
   > - 검색창을 비우면 전체 메모 목록 표시
   > 
   > 사용자 경험을 부드럽게 만들어 줘."

2. AI가 검색 기능을 구현해 줄 겁니다.

3. 브라우저에서 테스트해보세요!

## Step 9.5: Vercel에 배포하고 환경 변수 추가하기

새로운 기능을 배포해봅시다!

1. 코드를 GitHub에 push합니다:

   ```bash
   git add .
   git commit -m "Add advanced features: image upload, auto-save, AI memo summary"
   git push
   ```

2. [Vercel 대시보드](https://vercel.com/dashboard)로 이동합니다.

3. `Settings` > `Environment Variables`에서 Gemini API 키를 추가합니다:
   - `GEMINI_API_KEY` = (여러분의 Google Gemini API 키)

4. `Deployments` 탭으로 가서 자동 배포를 기다리거나 `Redeploy` 버튼을 누릅니다.

5. 배포 완료 후 실제 URL에서 모든 기능이 잘 작동하는지 테스트하세요!

## 💡 테스트 체크리스트

- ✅ 이미지 업로드가 정상 작동하나요?
- ✅ 타이핑하면 자동으로 저장되나요?
- ✅ '저장 중...' 표시가 나타나나요?
- ✅ AI 메모 정리 기능이 작동하나요?
- ✅ 검색 기능이 잘 작동하나요?
- ✅ 다른 기기에서도 동일하게 작동하나요?

## 🔥 9단계 성과

**축하합니다!** 여러분은 이제:

- ✅ 이미지를 업로드하고 저장할 수 있는 기능을 추가했습니다.
- ✅ 맥북 노트 앱처럼 자동 저장되는 매끄러운 UX를 구현했습니다.
- ✅ Google Gemini API를 연동해서 AI 기반 기능을 추가했습니다 (무료!).
- ✅ 검색 기능으로 메모 관리를 편리하게 만들었습니다.
- ✅ **실제 서비스 수준의 풀스택 웹 애플리케이션을 완성했습니다!** 🎉

**이제 여러분만의 아이디어를 추가해서 더욱 발전시켜 보세요!** 🚀

---

**다음:** [축하합니다! 🎉](./outro.md)


